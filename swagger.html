<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pawn Shop Management API Documentation</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@3.25.0/swagger-ui.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        
        .swagger-ui .topbar {
            background-color: #2c3e50;
        }
        
        .swagger-ui .topbar .topbar-wrapper {
            padding: 10px 0;
        }
        
        .swagger-ui .topbar .topbar-wrapper .link {
            color: #ecf0f1;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .swagger-ui .info .title {
            color: #2c3e50;
        }
        
        .swagger-ui .scheme-container {
            background: #ecf0f1;
            padding: 8px 20px;
            border-radius: 3px;
        }
        
        .swagger-ui .btn.authorize {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .swagger-ui .btn.authorize:hover {
            background-color: #2980b9;
            border-color: #2980b9;
        }
        
        .swagger-ui .opblock.opblock-post {
            border-color: #27ae60;
            background: rgba(39, 174, 96, 0.1);
        }
        
        .swagger-ui .opblock.opblock-post .opblock-summary {
            border-color: #27ae60;
        }
        
        .swagger-ui .opblock.opblock-get {
            border-color: #3498db;
            background: rgba(52, 152, 219, 0.1);
        }
        
        .swagger-ui .opblock.opblock-get .opblock-summary {
            border-color: #3498db;
        }
        
        .swagger-ui .opblock.opblock-put {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
        }
        
        .swagger-ui .opblock.opblock-put .opblock-summary {
            border-color: #f39c12;
        }
        
        .swagger-ui .opblock.opblock-delete {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }
        
        .swagger-ui .opblock.opblock-delete .opblock-summary {
            border-color: #e74c3c;
        }
        
        .custom-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .custom-header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .custom-header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.8;
        }
        
        .api-info {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        
        .api-info h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .api-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .api-info li {
            margin: 5px 0;
            color: #555;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }
        
        .feature-card h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .feature-card p {
            color: #666;
            margin: 10px 0;
        }
        
        .endpoint-count {
            background: #e8f5e8;
            color: #27ae60;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.9em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="custom-header">
        <h1>üè™ Pawn Shop Management API</h1>
        <p>Complete API documentation for managing pawn shop operations</p>
    </div>

    <div class="api-info" style="margin: 20px; max-width: 1200px; margin: 0 auto 20px auto;">
        <h3>üìö API Overview</h3>
        <p>This API provides comprehensive endpoints for managing a pawn shop business including customer management, loan processing, item tracking, billing, and reporting.</p>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h4>üîê Authentication <span class="endpoint-count">5 endpoints</span></h4>
                <p>User registration, login, password reset with OTP verification</p>
            </div>
            
            <div class="feature-card">
                <h4>üë• Admin Management <span class="endpoint-count">3 endpoints</span></h4>
                <p>Admin profile management and manager creation</p>
            </div>
            
            <div class="feature-card">
                <h4>üí∞ Loan Management <span class="endpoint-count">5 endpoints</span></h4>
                <p>Active/inactive loans, search, statistics with interest calculations</p>
            </div>
            
            <div class="feature-card">
                <h4>üßæ Billing & Invoicing <span class="endpoint-count">5 endpoints</span></h4>
                <p>Create billing records, generate invoices, PDF generation</p>
            </div>
            
            <div class="feature-card">
                <h4>üí∏ Repayment Processing <span class="endpoint-count">2 endpoints</span></h4>
                <p>Process loan repayments with multiple payment methods</p>
            </div>
            
            <div class="feature-card">
                <h4>üì¶ Item Management <span class="endpoint-count">4 endpoints</span></h4>
                <p>Add, update, delete, and retrieve pledged items</p>
            </div>
            
            <div class="feature-card">
                <h4>üìä Transactions <span class="endpoint-count">3 endpoints</span></h4>
                <p>Track all transactions with filtering and statistics</p>
            </div>
            
            <div class="feature-card">
                <h4>üìà Reports <span class="endpoint-count">1 endpoint</span></h4>
                <p>Generate comprehensive business reports</p>
            </div>
        </div>
        
        <h3>üöÄ Getting Started</h3>
        <ul>
            <li><strong>Base URL:</strong> <code>http://localhost:5000/api</code></li>
            <li><strong>Authentication:</strong> Bearer Token (JWT)</li>
            <li><strong>Content-Type:</strong> application/json</li>
            <li><strong>Authorization Header:</strong> <code>Authorization: Bearer {token}</code></li>
        </ul>
        
        <h3>üîë Authentication Flow</h3>
        <ul>
            <li>Register an admin account using <code>/auth/register</code></li>
            <li>Login with credentials to get JWT token via <code>/auth/login</code></li>
            <li>Use the token in Authorization header for protected endpoints</li>
            <li>Admins can create manager accounts via <code>/admin/add-manager</code></li>
        </ul>
    </div>

    <div id="swagger-ui"></div>

    <script src="https://unpkg.com/swagger-ui-dist@3.25.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.25.0/swagger-ui-standalone-preset.js"></script>
    <script>
        const ui = SwaggerUIBundle({
            url: './swagger.json',
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "StandaloneLayout",
            docExpansion: "none",
            operationsSorter: "alpha",
            tagsSorter: "alpha",
            validatorUrl: null,
            supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
            onComplete: function() {
                // Custom styling after load
                const topbar = document.querySelector('.topbar');
                if (topbar) {
                    topbar.style.display = 'none';
                }
            }
        });

        // Add custom logo and title
        window.addEventListener('load', function() {
            // Hide the default topbar
            const topbar = document.querySelector('.topbar');
            if (topbar) {
                topbar.style.display = 'none';
            }
            
            // Add custom authorization note
            const info = document.querySelector('.swagger-ui .info');
            if (info) {
                const authNote = document.createElement('div');
                authNote.className = 'api-info';
                authNote.innerHTML = `
                    <h3>üîê Authentication Required</h3>
                    <p>Most endpoints require authentication. Click the <strong>Authorize</strong> button above and enter your JWT token in the format: <code>Bearer {your-token}</code></p>
                    <p>Get your token by logging in via the <code>/auth/login</code> endpoint.</p>
                `;
                info.appendChild(authNote);
            }
        });
    </script>
</body>
</html>